---
import BaseLayout from '../../layouts/BaseLayout.astro';
import { getCollection } from 'astro:content';

const posts = (await getCollection('blog'))
  .sort((a, b) => b.data.date.getTime() - a.data.date.getTime());
---

<BaseLayout title="Blog">
  <h1>Blog</h1>
  <ul class="post-list">
    {posts.map(post => (
      <li>
        <time datetime={post.data.date.toISOString()}>
          {post.data.date.toISOString().slice(0, 10)}
        </time>
        <a href={`/blog/${post.id}/`}>{post.data.title}</a>
      </li>
    ))}
  </ul>
</BaseLayout>

<style>
  h1 {
    margin-bottom: 1.5rem;
  }

  .post-list {
    list-style: none;
    padding: 0;
  }

  .post-list li {
    display: flex;
    gap: 1rem;
    align-items: baseline;
    padding: 0.75rem 0;
    border-bottom: 1px solid var(--border);
  }

  .post-list time {
    font-size: 0.85rem;
    color: var(--text-secondary);
    white-space: nowrap;
  }
</style>
